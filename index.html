<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Journey | הניהול שלנו</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-[#FDFCFB] text-slate-800 font-['Assistant'] pb-24">

    <div class="max-w-5xl mx-auto p-4 md:p-8 space-y-6">
        <header class="card-gradient p-8 rounded-[40px] text-white shadow-xl relative overflow-hidden">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6 relative z-10">
                <div class="text-center md:text-right">
                    <h1 class="text-4xl font-black mb-2">המסע שלנו</h1>
                    <div id="display-weeks" class="text-2xl font-bold bg-white/20 inline-block px-4 py-1 rounded-full backdrop-blur-md italic">טוען...</div>
                    <div class="mt-4 text-sm opacity-90 leading-relaxed">
                        <p>תאריך לידה משוער: <span id="due-date" class="font-bold underline">--</span></p>
                        <p>מזל הבייבי: <span id="zodiac-sign" class="font-bold">--</span></p>
                    </div>
                    <button onclick="shareToWhatsApp()" class="mt-4 flex items-center gap-2 bg-emerald-500 hover:bg-emerald-600 px-4 py-2 rounded-full text-xs font-bold transition-all shadow-lg">
                        <i data-lucide="share-2" class="w-4 h-4"></i> שיתוף סיכום לווטסאפ
                    </button>
                </div>
                <div class="flex flex-col items-center bg-white/10 p-5 rounded-3xl backdrop-blur-md border border-white/20 min-w-[160px]">
                    <div id="fruit-emoji" class="text-6xl mb-1 animate-bounce">🌱</div>
                    <div id="fruit-name" class="text-xs font-bold uppercase tracking-widest text-pink-100 italic">טוען...</div>
                    <div class="mt-2 text-center border-t border-white/20 pt-2 w-full">
                        <span id="days-left" class="text-3xl font-black italic">--</span>
                        <p class="text-[10px] uppercase opacity-80">ימים ללידה</p>
                    </div>
                </div>
            </div>
        </header>

        <section class="card p-6 grid grid-cols-1 md:grid-cols-3 gap-6 items-end">
            <div class="space-y-2">
                <label class="label-sm text-slate-400 italic">תאריך וסת אחרון (LMP)</label>
                <input type="date" id="lmp-date" class="input-field w-full" onchange="handleLMPChange()">
            </div>
            <div class="grid grid-cols-2 gap-3">
                <div class="space-y-2">
                    <label class="label-sm text-slate-400 italic">שבוע</label>
                    <input type="number" id="manual-w" class="input-field w-full" oninput="handleManualChange()">
                </div>
                <div class="space-y-2">
                    <label class="label-sm text-slate-400 italic">יום</label>
                    <input type="number" id="manual-d" class="input-field w-full" oninput="handleManualChange()">
                </div>
            </div>
            <button onclick="resetToLMP()" class="btn-secondary py-3 text-xs font-black uppercase tracking-tighter">סנכרון לפי לוח שנה</button>
        </section>

        <nav class="flex overflow-x-auto gap-2 border-b border-slate-200 no-scrollbar py-2 sticky top-0 bg-[#FDFCFB]/90 backdrop-blur-md z-40">
            <button onclick="showTab('tasks')" class="tab-btn active" id="btn-tasks">בדיקות ולו"ז</button>
            <button onclick="showTab('procurement')" class="tab-btn" id="btn-proc">רכש ותקציב</button>
            <button onclick="showTab('hospital')" class="tab-btn" id="btn-hosp">תיק לידה</button>
            <button onclick="showTab('emergency')" class="tab-btn" id="btn-emer">אנשי קשר</button>
        </nav>

        <div id="tab-tasks" class="tab-content space-y-6">
            <div class="grid md:grid-cols-3 gap-6">
                <div class="space-y-4">
                    <h3 class="trim-title bg-emerald-50 text-emerald-700 border border-emerald-100 italic font-bold">טרימסטר 1 (1-13)</h3>
                    <div id="list-1" class="space-y-2"></div>
                </div>
                <div class="space-y-4">
                    <h3 class="trim-title bg-blue-50 text-blue-700 border border-blue-100 italic font-bold">טרימסטר 2 (14-26)</h3>
                    <div id="list-2" class="space-y-2"></div>
                </div>
                <div class="space-y-4">
                    <h3 class="trim-title bg-purple-50 text-purple-700 border border-purple-100 italic font-bold">טרימסטר 3 (27-40)</h3>
                    <div id="list-3" class="space-y-2"></div>
                </div>
            </div>
            <button onclick="openSelector('task')" class="btn-save w-full mt-4">+ הוסף בדיקה אישית</button>
        </div>

        <div id="tab-procurement" class="tab-content hidden space-y-4">
            <div class="card p-6 overflow-hidden">
                <div class="flex justify-between items-center mb-6 border-b pb-4">
                    <h3 class="font-bold text-lg">ניהול תקציב ורכש</h3>
                    <div class="text-left">
                        <span class="text-[10px] text-slate-400 block uppercase">סה"כ שולם</span>
                        <span id="total-spent" class="text-3xl font-black text-emerald-600">₪0</span>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-right text-sm">
                        <thead class="bg-slate-50 text-slate-400">
                            <tr>
                                <th class="p-4">מוצר</th>
                                <th class="p-4">מחיר שוק</th>
                                <th class="p-4">שילמנו</th>
                                <th class="p-4">איפה?</th>
                                <th class="p-4"></th>
                            </tr>
                        </thead>
                        <tbody id="proc-body"></tbody>
                    </table>
                </div>
                <button onclick="openSelector('proc')" class="btn-save w-full mt-6 bg-pink-500">+ הוסף פריט לרשימה</button>
            </div>
        </div>

        <div id="tab-hospital" class="tab-content hidden grid md:grid-cols-2 gap-6">
            <div class="card p-6 bg-pink-50/30 border-pink-100">
                <h3 class="font-bold mb-4 flex items-center gap-2 text-pink-700 underline decoration-2">👜 עבור ענבר</h3>
                <div id="bag-inbar" class="space-y-2"></div>
                <button onclick="openSelector('bag-inbar')" class="text-xs text-pink-500 font-bold mt-4">+ רעיונות לתיק</button>
            </div>
            <div class="card p-6 bg-blue-50/30 border-blue-100">
                <h3 class="font-bold mb-4 flex items-center gap-2 text-blue-700 underline decoration-2">👶 עבור הבייבי</h3>
                <div id="bag-baby" class="space-y-2"></div>
                <button onclick="openSelector('bag-baby')" class="text-xs text-blue-500 font-bold mt-4">+ רעיונות לתיק</button>
            </div>
        </div>

        <div id="tab-emergency" class="tab-content hidden space-y-4">
            <div id="emergency-list" class="grid md:grid-cols-2 gap-4"></div>
            <button onclick="addEmergencyItem()" class="btn-save w-full opacity-60">הוסף איש קשר חדש</button>
        </div>
    </div>

    <div id="selector-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[40px] p-8 max-w-lg w-full shadow-2xl">
            <h3 class="text-xl font-black mb-6">הוספת פריט חדש</h3>
            <div class="space-y-5">
                <select id="suggestion-select" class="input-field w-full" onchange="toggleManualInput(this.value)"></select>
                <div id="manual-input-container" class="hidden border-t pt-4">
                    <p class="text-[10px] text-slate-400 mb-2 uppercase font-bold">הקלדה ידנית:</p>
                    <input type="text" id="manual-entry" class="input-field w-full" placeholder="שם הפריט...">
                </div>
                <button onclick="submitSelection()" class="btn-save w-full bg-pink-500 py-4 shadow-lg">אישור והוספה</button>
                <button onclick="closeSelector()" class="w-full text-slate-300 text-xs">סגור</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
